parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"UL96":[function(require,module,exports) {
"use strict";var t,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameStatus=exports.Direction=void 0,function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(t=exports.Direction||(exports.Direction={})),function(t){t[t.InProgress=0]="InProgress",t[t.Won=1]="Won",t[t.Lost=2]="Lost"}(e=exports.GameStatus||(exports.GameStatus={}));
},{}],"NYkG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./types");exports.default={gridWidth:15,gridHeight:15,defaultSnakePosition:{x:5,y:5},defaultSnakeDirection:e.Direction.Right,stepsPerSecond:6};
},{"./types":"UL96"}],"XZGk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={cellSize:20,backgroundColor:"#1D1D1D",snakeColor:"green",appleColor:"red",gameWonBackgroundColor:"rgba(0,255,0,0.01)",gameLostBackgroundColor:"rgba(255,0,0,0.01)",gameEndTextColor:"rgba(255,255,255,0.05)"};
},{}],"kE3Z":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.nextStep=exports.initSnake=void 0;var e=require("./types"),i=t(require("./settings")),n=function(t,e){return Math.floor(Math.random()*(e-t))+t},r=function(t,e){return e.reduce(function(e,i){return e||t.x===i.x&&t.y===i.y},!1)},o=function t(e){var o={x:n(0,i.default.gridWidth),y:n(0,i.default.gridHeight)};return r(o,e)?t(e):o},u=function(){return{snakePositions:[i.default.defaultSnakePosition],snakeDirection:i.default.defaultSnakeDirection,applePosition:o([i.default.defaultSnakePosition]),gameStatus:e.GameStatus.InProgress}};exports.initSnake=u;var a=function(t,i){return!(t==e.Direction.Up&&i==e.Direction.Down||t==e.Direction.Down&&i==e.Direction.Up||t==e.Direction.Left&&i==e.Direction.Right||t==e.Direction.Right&&i==e.Direction.Left)},s=function(t,e){return(t%e+e)%e},c=function(t,n){switch(n){case e.Direction.Up:return{x:t.x,y:s(t.y-1,i.default.gridHeight)};case e.Direction.Down:return{x:t.x,y:(t.y+1)%i.default.gridHeight};case e.Direction.Left:return{x:s(t.x-1,i.default.gridWidth),y:t.y};case e.Direction.Right:return{x:(t.x+1)%i.default.gridWidth,y:t.y}}},f=function(t,e){return t.x===e.x&&t.y===e.y},d=function(t,e){return r(t,e)},l=function(t){return t.length===i.default.gridHeight*i.default.gridWidth},g=function(t,i){var n=t.snakeDirection;void 0!==i&&a(n,i)&&(n=i);var r=c(t.snakePositions[0],n),u=t.snakePositions,s=t.applePosition,g=t.gameStatus;return u.unshift(r),l(u)?g=e.GameStatus.Won:f(r,s)?s=o(u):d(r,u.slice(1))?g=e.GameStatus.Lost:u.pop(),{snakePositions:u,snakeDirection:n,applePosition:s,gameStatus:g}};exports.nextStep=g;
},{"./types":"UL96","./settings":"NYkG"}],"tgFc":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./settings")),l=e(require("./canvas-settings")),i=require("./snake"),n=require("./types"),a=function(e,i){e.fillStyle=l.default.backgroundColor,e.fillRect(0,0,t.default.gridWidth*l.default.cellSize,t.default.gridHeight*l.default.cellSize),e.fillStyle=l.default.snakeColor,i.snakePositions.forEach(function(t){return e.fillRect(t.x*l.default.cellSize,t.y*l.default.cellSize,l.default.cellSize,l.default.cellSize)}),e.fillStyle=l.default.appleColor,e.fillRect(i.applePosition.x*l.default.cellSize,i.applePosition.y*l.default.cellSize,l.default.cellSize,l.default.cellSize)},u=function e(t,l,i){void 0===i&&(i=50),l(),i-1>0&&requestAnimationFrame(function(){return e(t,l,i-1)})},o=function(e,i,n,a){e.fillStyle=i,u(e,function(){e.fillRect(0,0,t.default.gridWidth*l.default.cellSize,t.default.gridHeight*l.default.cellSize)}),setTimeout(function(){u(e,function(){e.fillStyle=l.default.gameEndTextColor,e.font="bold 50px sans",e.fillText(n,a,165)})},900)},r=function(e,t){switch(t.gameStatus){case n.GameStatus.InProgress:a(e,t);break;case n.GameStatus.Won:o(e,l.default.gameWonBackgroundColor,"YOU WON",30);break;case n.GameStatus.Lost:o(e,l.default.gameLostBackgroundColor,"YOU LOST",25)}},f=function(e){switch(e){case 37:return n.Direction.Left;case 38:return n.Direction.Up;case 39:return n.Direction.Right;case 40:return n.Direction.Down;default:return null}},d=function(e,l){var a=[];e.addEventListener("keydown",function(e){console.log("keydown",e.keyCode);var t=f(e.keyCode);null!==t&&a.push(t)});var u=i.initSnake();r(l,u);var o=performance.now(),d=1e3/t.default.stepsPerSecond;requestAnimationFrame(function e(t){t-o>d&&(u=i.nextStep(u,a.shift()),r(l,u),o=t),u.gameStatus===n.GameStatus.InProgress&&requestAnimationFrame(e)})},c=function(e){void 0===e&&(e=document);var i=e.getElementById("canvas");if(null===i)throw"Canvas element not found";var n=i;n.width=t.default.gridWidth*l.default.cellSize,n.height=t.default.gridHeight*l.default.cellSize;var a=n.getContext("2d");if(null===a)throw"Could not get 2D rendering context";d(e,a)};c();
},{"./settings":"NYkG","./canvas-settings":"XZGk","./snake":"kE3Z","./types":"UL96"}]},{},["tgFc"], null)
//# sourceMappingURL=/snake-canvas.cfbe7086.js.map